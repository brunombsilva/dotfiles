#!/bin/bash

CONFIGURATION_DIR=$HOME/.dotfiles/configuration
LN_FLAGS=''

if [ "$1" == '-f' ]; then
    LN_FLAGS='-f'
fi

set -e

for file in $(find $CONFIGURATION_DIR -maxdepth 1 -name ".*" | tail -n +2); do
    ln -s $LN_FLAGS $file $(echo "$file" | sed "s|$CONFIGURATION_DIR/||;");
done

mkdir -p .ssh
if [ -f "$CONFIGURATION_DIR/ssh/config" ]; then
    ln -s $LN_FLAGS $CONFIGURATION_DIR/ssh/config $HOME/.ssh/config;
fi

mkdir -p .config
ln -s $LN_FLAGS $CONFIGURATION_DIR/powerline $HOME/.config/powerline

