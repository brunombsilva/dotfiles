#!/bin/bash

set -e

sudo apt-get -y --no-install-recommends install build-essential

eval "$($HOME/.rbenv/bin/rbenv init -)" || true
eval "$($HOME/.pyenv/bin/pyenv init -)" || true
source $HOME/.nvm/nvm.sh

if [ "$PYTHON_VERSION" = 'system' ]; then
    PIP_OPTIONS='--trusted-host pypi.python.org --user';
fi

for package in $@; do
    case $package in
        pip-*)
            pip install $PIP_OPTIONS ${package/pip-/}
            ;;
        gem-*)
            gem install $GEM_OPTIONS ${package/gem-/}
            ;;
        npm-*)
            npm install -g $NPM_OPTIONS ${package/npm-/}
            ;;
    esac
done

sudo apt-get -y remove build-essential
sudo apt-get -y autoremove
